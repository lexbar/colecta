{% extends '::frontend.html.twig' %}

{% block title %}Editar {{ item.name }} | Textos{% endblock %}

{% block javascripts %}    
    <script>
    
{% include 'ColectaItemBundle:Default:relateitems.js.twig' %}
        
{% include 'ColectaItemBundle:Category:categoryform.js.twig' %}
    
    </script>
{% endblock %}
{% block article %}

{% if item.canEdit(app.user) %}
    <div class="row">
        <div class="col-sm-8 col-lg-9">
            <h2>Editar {{ item.name }}</h2>
        </div>
        <div class="col-sm-4 col-lg-3">
            <a class="btn btn-default btn-block" href="{{ path('ColectaPostView', {'slug':item.slug}) }}"><i class="fa fa-angle-double-left"></i> Volver a la publicación</a>
        </div>
    </div>
    
    <div class="monocontent">
        <form action="{{ path('ColectaPostEdit', {slug:item.slug}) }}" method="POST" class="form-horizontal" role="form">
            <fieldset>
              <div class="form-group">
                <label class="col-sm-3 col-lg-2 control-label" for="PostName">Título</label>
                <div class="col-sm-9 col-lg-10">
                  <input type="text" class="form-control" id="PostName" name="name" value="{{item.name}}">
                </div>
              </div>
              
              <div class="form-group">
                <label class="col-sm-3 col-lg-2 control-label" for="PostText">Texto</label>
                <div class="col-sm-9 col-lg-10">
                  <textarea class="form-control" id="PostText" name="text" rows="5">{{ item.text }}</textarea>
                </div>
              </div>
              
              <div class="form-group">
                <label class="col-sm-3 col-lg-2 control-label" for="PostText">Categoría</label>
                <div class="col-sm-9 col-lg-10">
                    {% render 'ColectaItemBundle:Category:formlist' with {'selected':item.category.id} %}
                </div>
              </div>
              
              <div class="form-group">
                <div class="col-lg-offset-2 col-sm-offset-3 col-sm-9 col-lg-10">
                    {% if item.draft %}<button class="btn">Guardar como borrador</button>{% endif %}
                    <button type="submit" class="btn btn-primary">{% if item.draft %}Publicar ahora{% else %}Actualizar{% endif %}</button> 
                    <a href="{{ path('ColectaPostDelete', {slug: item.slug}) }}" class="btn btn-danger" onClick="return confirm('¿Seguro que quieres eliminar este contenido?')"><i class="icon-trash"></i> Eliminar</a>
                </div>
              </div>
            </fieldset>
        </form>
        
        {% include 'ColectaItemBundle:Default:relateItems.html.twig' with { 'item': item } only %}
        
    </div>
{% endif %}

{% endblock %}