{% extends '::frontend.html.twig' %}

{% block title %}Mapas{% endblock %}

{% block article %}

    <div class="row">    
        <div class="col-xs-12 col-sm-4 col-md-3 pull-right">
        	{# CUSTOM NAVIGATION #}
            {#{ render(controller('ColectaSiteBundle:Page:navigation')) }#}
            
            <form id="searchForm" role="search" action="{{ path('ColectaSearch') }}" method="GET">
                <div class="inner-addon right-addon">
                    <input type="text" class="form-control" name="q" id="searchInput" value="{{ app.request.get('q') }}" placeholder="Buscar...">
                    <i class="fa fa-search" onClick="$('#searchForm').submit()"></i>
                </div>
            </form>
            
            <div class="categories">
                <p class="lead" onClick="$('#categoriesList').toggleClass('hidden-xs');">Categorías <i class="fa fa-caret-down"></i></p>
                <ul class="list-unstyled hidden-xs" id="categoriesList">
                    {% for category in categories %}
                    <li><a href="{{ path('ColectaRouteCategoryIndex',{'slug':category.slug}) }}">{{ category.name }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="col-xs-12 col-sm-8 col-md-9">
            {% if app.user %} <a href="{{ path('ColectaRouteNew')}}" class="btn btn-small btn-primary pull-right post-content"><i class="fa fa-plus fa-fw"></i> Publicar</a> {% endif %}
            <h2>Rutas{% if page > 1 %} <small>página {{page}}</small>{% endif %}</h2>
            
            {% for item in items %}
                {% set path = 'Colecta' ~ item.type ~ ':mini.html.twig' %}
                {% set path = path | replace({'/':'Bundle:'}) %}
                {% include path with { 'item': item } only %}
            {% else %}
                <div class="monocontent text-center">
                    <h3><i class="fa fa-{{ itemIcons['Activity/Route'] }} fa-fw"></i> Las rutas y los lugares que se añadan aparecerán aquí.</h3>
                </div>
            {% endfor %}
            
            {% if page > 1 or thereAreMore %}
                <ul class="pager">
                  <li class="previous{% if page == 1 %} disabled{% endif %}">
                    <a href="{% if page > 1 %}{{ path('ColectaMapPage', {'page': page - 1 }) }}{% else %}{% endif %}">&larr; Anteriores</a>
                  </li>
                  <li class="next{% if not thereAreMore %} disabled{% endif %}">
                    <a href="{% if thereAreMore %}{{ path('ColectaMapPage', {'page': page + 1 }) }}{% else %}{% endif %}">Siguientes &rarr;</a>
                  </li>
                </ul>
            {% endif %}
        </div>
    </div>
{% endblock %}