{% extends '::frontend.html.twig' %}

{% block events 'active' %}

{% block article %}

{% if app.user %}
<form action="{{ path('ColectaEventCreate') }}" method="POST" class="form-horizontal well hidden" onclick="this.className='form-horizontal well'">
<h2>Crear un nuevo Evento</h2>
    <fieldset>
      <div class="control-group">
        <label class="control-label" for="EventName">Fecha Inicio</label>
        <div class="controls">
          <input type="text" class="input-small" id="EventDateini" name="dateini" value="{{ 'tomorrow' | date('Y-m-d') }}"> a las 
          <select id="EventDifficulty" id="EventDateiniHour" name="dateinihour" style="width:auto">
              {% for hour in 0..23 %}
                <option value="{% if hour < 10 %}0{% endif %}{{ hour }}"{% if hour == 8 %} selected="selected"{% endif %}>{% if hour < 10 %}0{% endif %}{{ hour }}</option>
              {% endfor %}
          </select> :
          <select id="EventDifficulty" id="EventDateiniMinute" name="dateiniminute" style="width:auto">
              {% for minute in ['00','15','30','45'] %}
                <option value="{{ minute }}">{{ minute }}</option>
              {% endfor %}
          </select>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="medium">Fecha Fin</label>
        <div class="controls">
          <input type="text" class="input-small" id="EventDateend" name="dateend" value="{{ 'tomorrow' | date('Y-m-d') }}"> a las 
          <select id="EventDifficulty" id="EventDateendHour" name="dateendhour" style="width:auto">
              {% for hour in 0..23 %}
                <option value="{% if hour < 10 %}0{% endif %}{{ hour }}"{% if hour == 14 %} selected="selected"{% endif %}>{% if hour < 10 %}0{% endif %}{{ hour }}</option>
              {% endfor %}
          </select> :
          <select id="EventDifficulty" id="EventDateendMinute" name="dateendminute" style="width:auto">
              {% for minute in ['00','15','30','45'] %}
                <option value="{{ minute }}">{{ minute }}</option>
              {% endfor %}
          </select>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventName">Título</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="EventName" name="name">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventDescription">Descripción</label>
        <div class="controls">
          <textarea class="input-xlarge" id="EventDescription" name="description" rows="3"></textarea>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventName">Distancia</label>
        <div class="controls">
          <div class="input-append">
            <input type="text" class="input-small" id="EventDistance" name="distance"><span class="add-on"> km</span>
          </div>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventName">Desnivel subida</label>
        <div class="controls">
          <div class="input-append">
            <input type="text" class="input-small" id="EventUphill" name="uphill"><span class="add-on"> metros</span>
          </div>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventName">Desnivel bajada</label>
        <div class="controls">
          <div class="input-append">
            <input type="text" class="input-small" id="EventDownhill" name="downhill"><span class="add-on"> metros</span>
          </div>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventName">Dificultad</label>
        <div class="controls">
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyEasy" value="" checked>
                No indicar
            </label>
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyEasy" value="easy">
                <img src="/img/difficulty/easy.gif" alt="fácil" width="70" height="12">
                Fácil
            </label>
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyModerate" value="moderate">
                <img src="/img/difficulty/moderate.gif" alt="moderado" width="70" height="12">
                Moderado
            </label>
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyHard" value="hard">
                <img src="/img/difficulty/hard.gif" alt="difícil" width="70" height="12">
                Difícil
            </label>
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyVeryhard" value="very hard">
                <img src="/img/difficulty/very-hard.gif" alt="muy difícil" width="70" height="12">
                Muy difícil
            </label>
            <label class="radio">
                <input type="radio" name="difficulty" id="EventDifficultyExpertsonly" value="experts only">
                <img src="/img/difficulty/experts-only.gif" alt="sólo expertos" width="70" height="12">
                Sólo expertos
            </label>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="EventCategory">Categoría</label>
        <div class="controls">
          <select id="EventCategory" name="category">
            {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
            {% endfor %}
          </select>
        </div>
      </div>
      <div class="form-actions">
        <button class="btn">Guardar como borrador</button>
        <button type="submit" class="btn btn-primary">Publicar ahora</button>
      </div>
    </fieldset>
</form>
{% endif %}

{% for item in items %}
<div class="item">
    {% include 'ColectaItemBundle:Default:itemheader.html.twig' with { 'item': item } only %}
    
    {% set path = 'Colecta' ~ item.type ~ ':mini.html.twig' %}
    {% set path = path | replace({'/':'Bundle:'}) %}
    {% include path with { 'item': item } only %}
    
    {% include 'ColectaItemBundle:Comment:comments.html.twig' with { 'comments': item.comments, item: item } only %}
</div>
{% endfor %}

<ul class="pager">
  <li class="previous{% if page == 1 %} disabled{% endif %}">
    <a href="{% if page > 1 %}{{ path('ColectaEventPage', {'page': page - 1 }) }}{% else %}{% endif %}">&larr; Anteriores</a>
  </li>
  <li class="next{% if not thereAreMore %} disabled{% endif %}">
    <a href="{% if thereAreMore %}{{ path('ColectaEventPage', {'page': page + 1 }) }}{% else %}{% endif %}">Siguientes &rarr;</a>
  </li>
</ul>

{% endblock %}