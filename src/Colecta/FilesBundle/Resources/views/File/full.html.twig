{% extends '::frontend.html.twig' %}

{% block files 'active' %}

{% block article %}
<div class="file full">
    {% include 'ColectaItemBundle:Default:itemheader.html.twig' with { 'item': item } only %}
    
    <h2>{{ item.name }}</h2>
    
    {% if item.filetype in ['jpeg','gif','png'] %}
        <div class="fullimage" style="width:auto;height:480px;background: url('{{ path('ColectaFileResize', {'slug':item.slug, 'width':'640', 'height':'480'}) }}') scroll no-repeat center center #111;">
            {% set next = item.folder.getNextPicture(item) %}
            {% set previous = item.folder.getPreviousPicture(item) %}
            <a href="{% if next %}{{ path('ColectaFileView', {'slug':next.slug}) }}{% else %}#{% endif%}" class="pull-left{% if next %} active{% endif %}"><i class="icon-angle-left icon-4x"></i></a>
            <a href="{% if previous %}{{ path('ColectaFileView', {'slug':previous.slug}) }}{% else %}#{% endif%}" class="pull-right{% if previous %} active{% endif %}"><i class="icon-angle-right icon-4x"></i></a>
        </div>
        <a class="pull-right" href="{{ path('ColectaFileDownload',{ 'slug': item.slug, 'type': item.filetype }) }}"><small>Descargar original <i class="icon-download-alt"></i></small></a>
    {% else %}
        <a href="{{ path('ColectaFileDownload',{ 'slug': item.slug, 'type': item.filetype }) }}" class="btn btn-warning"><i class="icon-download-alt icon-large"></i> <strong>Descargar fichero <span style="text-transform: uppercase;">{{ item.filetype }}</span></strong></a>
    {% endif %}
    
    <p>{{ item.description | usercontent | raw | nl2br }}</p>
    {% if item.folder %}<p>Pertenece a la carpeta: <a href="{{ path('ColectaFolderView', { 'slug': item.folder.slug }) }}">{{ item.folder.name }}</a></p>{% endif %}
    
    {% include 'ColectaItemBundle:Default:related.html.twig' with { 'items' : item.related } %}
    
    {% include 'ColectaItemBundle:Default:itemactions.html.twig' with { item: item } only %}
    
    {% include 'ColectaItemBundle:Comment:comments.html.twig' with { 'comments': item.comments, item: item, 'collapse': 18 } only %}
</div>
{% endblock %}