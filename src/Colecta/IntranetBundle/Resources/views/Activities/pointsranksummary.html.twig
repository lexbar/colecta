{% set maxpoints = points[users[0].id] %}

{% if userpos < 5  %}

	{% for n,user in users|slice(0, 5) %}
		<div class="row">
		    <div class="col-xs-6"><p>[{{ n + 1 }}] <strong>{{ user.name }}</strong></p></div>
		    <div class="col-xs-6">
		        <div class="progress">
		            <div class="progress-bar progress-bar-primary" style="width: {% if maxpoints > 0 %}{{ (points[user.id] / maxpoints * 100) | number_format(1,'.',',') }}{% else %}0{% endif %}%;"></div>
		        </div>
		    </div>
		</div>
	{% endfor %}
	
	<i class="fa fa-ellipsis-v text-primary fa-fw"></i>

{% else %}

	{% for n,user in users|slice(0, 3) %}
		<div class="row">
		    <div class="col-xs-6"><p>[{{ n + 1 }}] <strong>{{ user.name }}</strong></p></div>
		    <div class="col-xs-6">
		        <div class="progress">
		            <div class="progress-bar progress-bar-primary" style="width: {% if maxpoints > 0 %}{{ (points[user.id] / maxpoints * 100) | number_format(1,'.',',') }}{% else %}0{% endif %}%;"></div>
		        </div>
		    </div>
		</div>
	{% endfor %}
	
	<i class="fa fa-ellipsis-v text-primary fa-fw"></i>
	
	{% for n,user in users|slice(userpos - 1 , 3) %}
		<div class="row">
		    <div class="col-xs-6"><p>[{{ userpos + n }}] <strong>{{ user.name }}</strong></p></div>
		    <div class="col-xs-6">
		        <div class="progress">
		            <div class="progress-bar progress-bar-primary" style="width: {% if maxpoints > 0 %}{{ (points[user.id] / maxpoints * 100) | number_format(1,'.',',') }}{% else %}0{% endif %}%;"></div>
		        </div>
		    </div>
		</div>
	{% endfor %}
	
{% endif %}