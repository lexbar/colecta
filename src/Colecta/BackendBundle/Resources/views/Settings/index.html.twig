{% extends '::backend.html.twig' %}

{% block article %}

    <h2>Ajustes</h2>
    
    {% include 'ColectaBackendBundle:Default:navigation.html.twig' with { 'active' : 'settings' } %}
    
    <div class="monocontent tabs">
        <form action="{{ path('ColectaBackendSettingsIndex') }}" method="post" class="form-horizontal" enctype="multipart/form-data">
            <div class="form-group">
                <label for="web_title" class="col-sm-4 control-label">
                    <strong>Título de la web:</strong>
                </label>
                <div class="col-sm-8">
                    <input type="text" value="{{ web_parameters.twig.globals.web_title }}" class="form-control" id="web_title" name="web_title">
                </div>
            </div>
            
            <div class="form-group">
                <label for="web_description" class="col-sm-4 control-label">
                    <strong>Descripción para buscadores:</strong>
                </label>
                <div class="col-sm-8">
                    <textarea rows="3" class="form-control" id="web_description" name="web_description">{{ web_parameters.twig.globals.web_description }}</textarea>
                </div>
            </div>
            
            <div class="form-group">
                <label for="web_theme" class="col-sm-4 control-label">
                    <strong>Estilo:</strong>
                </label>
                <div class="col-sm-8">
                    <select id="web_theme" name="web_theme" class="form-control">
                        {% set theme_options = [['theme-blue','Cásico'],['theme-google','Google']] %}
                        {% for theme in theme_options %}
                        <option{% if web_parameters.twig.globals.web_theme == theme[0] %} selected="selected"{% endif %} value="{{ theme[0] }}">{{ theme[1] }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="theme_sidebar" class="col-sm-4 control-label">
                    <strong>Barra lateral:</strong>
                </label>
                <div class="col-sm-8">
                    <label class="radio-inline">
                        <input type="radio"{% if web_parameters.twig.globals.theme_sidebar == 'left' %} checked="checked"{% endif %} name="theme_sidebar" value="left"> Izquierda
                    </label>
                    
                    <label class="radio-inline">
                        <input type="radio"{% if web_parameters.twig.globals.theme_sidebar == 'right' %} checked="checked"{% endif %} name="theme_sidebar" value="right"> Derecha
                    </label>
                </div>
            </div>
            
            <div class="form-group">
                <label for="web_logo" class="col-sm-4 control-label">
                    <strong>Logo:</strong>
                </label>
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col-md-6"><input type="text" value="{{ web_parameters.twig.globals.web_logo }}" class="form-control" id="web_logo" name="web_logo" placeholder="Dirección web de la imagen..."></div>
                        <div class="col-md-6"><div style="position:relative;"><input style="position: relative; z-index: 2; font-size: 25px; -moz-opacity:0;filter:alpha(opacity: 0);opacity: 0;" type="file" id="web_logo_upload" name="web_logo_upload"></input><div style="position:absolute;top:0;left:0;width:100%;z-index:1;"><button id="web_logo_upload_button" class="btn btn-default btn-block"><i class="fa fa-upload"></i> Subir archivo</button></div></div></div>
                    </div>
                    <p class="help-block">Se recomienda no superar los 24 pixeles de altura.</p>
                    {% if web_parameters.twig.globals.web_logo %}
                    <hr>
                    <div class="row">
                        <div class="col-xs-6 col-sm-12 col-md-6"><img src="{{ web_parameters.twig.globals.web_logo }}"></div>
                        <div class="col-xs-6 col-sm-12 col-md-6">
                            <div class="checkbox" style="padding-top:0"><label><input type="checkbox" name="web_logo_only" value="1"{% if web_parameters.twig.globals.web_logo_only %}checked="checked"{% endif %}> No mostrar el título</label></div>
                            <div class="checkbox" style="padding-top:0"><label class="text-danger"><input type="checkbox" name="web_logo_delete" value="1"> Eliminar</label></div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <div class="form-group">
                <label for="web_header_img" class="col-sm-4 control-label">
                    <strong>Imágenes de cabecera:</strong>
                </label>
                <div class="col-sm-8">
                    <div class="row">
                        <div class="col-md-6"><input type="text" value="" class="form-control" id="web_header_img" name="web_header_img" placeholder="Dirección web de la imagen..."></div>
                        <div class="col-md-6"><div style="position:relative;"><input style="position: relative; z-index: 2; font-size: 25px; -moz-opacity:0;filter:alpha(opacity: 0);opacity: 0;" type="file" id="web_header_img_upload" name="web_header_img_upload"></input><div style="position:absolute;top:0;left:0;width:100%;z-index:1;"><button id="web_header_img_upload_button" class="btn btn-default btn-block"><i class="fa fa-upload"></i> Subir archivo</button></div></div></div>
                    </div>
                    <p class="help-block">Si subes más de una imagen se mostrarán alternadas aleatoriamente.</p>
                    {% if web_parameters.twig.globals.web_header_img %}
                    <hr>
                    <div class="row">
                        {% for img in web_parameters.twig.globals.web_header_img %}
                            {% if not loop.first %}<br>{% endif %}
                            <div class="col-xs-12">
                                <div class="checkbox">
                                    <label class="text-danger"><input type="checkbox" name="web_header_img_{{ loop.index0 }}"> Eliminar</label>
                                </div>
                                <img class="img-responsive" src="{{ img }}">
                            </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
            
            <hr>
            
            <div class="form-group">
                <div class="col-sm-offset-4 col-sm-8">
                    <button type="submit" class="btn btn-primary">Guardar cambios</button>
                </div>
            </div>
        </form>
    </div>
        
{% endblock%}

{% block javascripts %}
<script> 
$('#web_logo_upload').change(FileChange);
$('#web_header_img_upload').change(FileChange);

function FileChange() {
    if(this.files) {
        $(this).parent().find('button').addClass('btn-success').removeClass('btn-default').html('<i class="fa fa-refresh"></i> Archivo seleccionado');
        $(this).parent().parent().parent().find('.form-control').val('.../' + this.files[0].name);
    }
}
</script>
{% endblock %}