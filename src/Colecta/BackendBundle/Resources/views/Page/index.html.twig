{% extends '::backend.html.twig' %}

{% block article %}
    
    <h2>Páginas</h2>

    {% include 'ColectaBackendBundle:Default:navigation.html.twig' with { 'active' : 'page' } %}
        
    <div class="monocontent tabs">
        <a href="{{ path('ColectaBackendNewPage') }}" class="btn btn-primary">Crear Nueva Página <i class="fa fa-plus"></i></a> 
        {% if pages | length > 0 %}
        
        <hr>
        
        <table class="table table-hover">
        <thead><tr><th>Nombre</th><th>Estado</th>{% if pages | length > 1 %}<th>Orden</th>{% endif %}<th>Acciones</th></tr></thead>
        {% for page in pages %}
            <tr>
                <td><a href="{{ path('ColectaPage', {slug:page.slug}) }}">{% if page.icon %}<i class="fa fa-{{ page.icon }} fa-fw"></i> {% endif %}{{ page.name }}</a><br>{% include 'ColectaItemBundle:Default:timeago.html.twig' with { 'date': page.date } only %}</td>
                <td>{% if page.draft %}<span class="hidden-xs">Pendiente</span><i class="fa fa-edit visible-xs"></i>{% else %}<span class="hidden-xs">Publicado</span><i class="fa fa-check visible-xs"></i>{% endif %}</td>
                {% if pages | length > 1 %}
                <td>{% if page.sidebarShow %}<a href="{{ path('ColectaBackendPageMoveUp' , {'page_id':page.id}) }}"><i class="fa fa-chevron-up"></i></a> <a href="{{ path('ColectaBackendPageMoveDown' , {'page_id':page.id}) }}"><i class="fa fa-chevron-down"></i></a>{% else %} <i class="fa fa-eye-slash"></i> {% endif %}</td>
                {% endif %}
                <td><a href="{{ path('ColectaBackendPage', {'page_id':page.id}) }}" class="text-success">editar</a>{% if page.contactRequests | length == 0 %} / <a href="{{ path('ColectaBackendPageDelete', {'page_id':page.id}) }}" class="text-danger" onClick="confirm('¿Seguro que deseas eliminar la página?\n{{ page.name }}')">eliminar</a>{% endif %}</td>
            </tr> 
        {% endfor %}
        </table>
        {% endif %}
    </div>
{% endblock%}